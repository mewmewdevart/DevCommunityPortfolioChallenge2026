import{j as e,r as l}from"./vendor-CGXhCyq3.js";import{u as N,I as x}from"./game-DRu4TTPN.js";import{W as w}from"./WinButton--pDtRnHg.js";import{m as z}from"./index-CRSbQ2FK.js";import"./i18n-CjG_VPcn.js";const C=[{id:"1",name:"Cat",status:"online",avatar:"var(--blue-700)"}],M=["Meow meow! ","Meow meow Meow! ","Purr... "],H=({onLogin:a})=>{const{t:n}=N();return e.jsxs("div",{className:"messenger-login",children:[e.jsxs("header",{className:"messenger-login__header",children:[e.jsx(x,{icon:z,size:32,className:"messenger-login__icon"}),e.jsx("h1",{className:"messenger-login__title",children:n("messenger_title")}),e.jsx("span",{className:"messenger-login__subtitle",children:n("messenger_version")})]}),e.jsxs("form",{className:"messenger-login__form",onSubmit:s=>{s.preventDefault(),a()},children:[e.jsxs("div",{children:[e.jsx("label",{className:"messenger-label",htmlFor:"email-input",children:n("login_email")}),e.jsx("input",{id:"email-input",type:"text",className:"messenger-input",defaultValue:"guest@gmail.com",maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"messenger-label",htmlFor:"password-input",children:n("login_password")}),e.jsx("input",{id:"password-input",type:"password",className:"messenger-input",defaultValue:"password",maxLength:100})]}),e.jsxs("div",{className:"messenger-checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"remember",defaultChecked:!0,className:"messenger-checkbox"}),e.jsx("label",{htmlFor:"remember",className:"messenger-checkbox-label",children:n("login_remember")})]}),e.jsx("div",{className:"messenger-btn-container",children:e.jsx(w,{className:"messenger-btn-login",type:"submit",children:n("login_signin")})})]})]})},T="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M15%202H9v2H7v6h2V4h6V2zm0%208H9v2h6v-2zm0-6h2v6h-2V4zM4%2016h2v-2h12v2H6v4h12v-4h2v6H4v-6z'%20fill='currentColor'/%3e%3c/svg%3e",S="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M7%208H5v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h2V8h-2v2h-2v2h-2v2h-2v-2H9v-2H7V8z'%20fill='currentColor'/%3e%3c/svg%3e",D=({onOpenChat:a})=>{const{t:n}=N();return e.jsxs("div",{className:"messenger-contacts",children:[e.jsxs("header",{className:"messenger-user-status",children:[e.jsx("div",{className:"messenger-avatar-box",children:e.jsx(x,{icon:T,size:32,className:"messenger-user-icon"})}),e.jsxs("div",{className:"messenger-user-info",children:[e.jsx("span",{className:"messenger-user-name",children:n("messenger_guest")}),e.jsxs("div",{className:"messenger-status-dropdown",children:[e.jsx("span",{className:"messenger-status-dot-icon",children:"â—"}),e.jsx("span",{children:n("messenger_online")}),e.jsx(x,{icon:S,size:16})]})]})]}),e.jsxs("section",{className:"messenger-contact-list","aria-label":n("contact_list")||"Contact list",children:[e.jsxs("div",{className:"messenger-group-header",children:[e.jsx(x,{icon:S,size:16,className:"messenger-group-chevron"}),e.jsxs("span",{className:"messenger-group-title",children:[n("messenger_friends")," (",C.length,")"]})]}),e.jsx("div",{className:"messenger-contact-list-container",role:"list",children:C.map(s=>e.jsxs("button",{type:"button",className:"messenger-contact-item",onClick:()=>a(s),role:"listitem","aria-label":`Chat with ${s.name}, ${s.status}`,children:[e.jsxs("div",{className:"messenger-contact-avatar",children:[e.jsx("div",{className:"messenger-avatar-small",style:{backgroundColor:s.avatar}}),e.jsx("div",{className:`messenger-status-dot messenger-status-dot--${s.status}`})]}),e.jsxs("div",{className:"messenger-contact-details",children:[e.jsx("span",{className:"messenger-contact-name",children:s.name}),e.jsx("span",{className:"messenger-contact-status",children:s.status==="online"?n("messenger_status_chilling"):s.status==="busy"?n("messenger_status_coding"):n("messenger_status_away")})]})]},s.id))})]}),e.jsx("aside",{className:"messenger-ad-banner","aria-label":"Advertisement",children:n("messenger_ad")})]})},R="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M14%204V2h-4v2H5v2h14V4h-5zm5%2012H5v-4H3v6h5v4h2v-4h4v2h-4v2h6v-4h5v-6h-2V6h-2v8h2v2zM5%206v8h2V6H5z'%20fill='currentColor'/%3e%3c/svg%3e",$=({activeContact:a,messages:n,isTyping:s,isNudged:p,onBack:c,onSend:o,onNudge:_})=>{const[d,v]=l.useState(""),g=l.useRef(null),b=l.useRef(null),j=l.useRef(null),{t}=N();l.useEffect(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[n,s]),l.useEffect(()=>{setTimeout(()=>{j.current?.focus()},100)},[]);const u=()=>{d.trim()&&(o(d),v(""))};return e.jsxs("div",{className:`messenger-chat ${p?"messenger-chat--nudged":""}`,children:[e.jsxs("header",{className:"messenger-chat__header",children:[e.jsxs("div",{className:"messenger-chat__user-row",children:[e.jsx("div",{className:"messenger-avatar-wrapper",children:e.jsx("div",{className:"messenger-avatar-medium",style:{backgroundColor:a.avatar}})}),e.jsxs("div",{className:"messenger-chat-user-details",children:[e.jsx("div",{className:"messenger-chat-username",children:a.name}),e.jsxs("div",{className:"messenger-chat-email",children:["<",a.name.toLowerCase(),"@gmail.com>"]})]})]}),e.jsx(w,{className:"messenger-back-btn",onClick:c,children:t("messenger_contacts")})]}),e.jsxs("div",{className:"messenger-chat__log",ref:b,role:"log","aria-live":"polite","aria-relevant":"additions text","aria-label":t("chat_log_label"),children:[e.jsx("div",{className:"messenger-chat__disclaimer",children:t("messenger_security_msg")}),n.map(r=>e.jsxs("article",{className:"messenger-message-item",children:[e.jsxs("div",{className:`messenger-message-sender ${r.sender==="me"?"messenger-sender-me":"messenger-sender-them"}`,children:[r.sender==="me"?t("messenger_guest"):a.name," ",t("messenger_says")]}),e.jsx("div",{className:`messenger-message-text ${r.text.includes("Nudge")?"messenger-message-nudge":""}`,children:r.text})]},r.id)),s&&e.jsx("div",{className:"messenger-typing-indicator",role:"status",children:e.jsxs("div",{className:"messenger-typing-text",children:[a.name," ",t("messenger_typing")]})}),e.jsx("div",{ref:g})]}),e.jsxs("footer",{className:"messenger-toolbar",children:[e.jsxs("div",{className:"messenger-toolbar__actions",children:[e.jsx("button",{className:"messenger-toolbar__btn",title:t("messenger_nudge_action"),onClick:_,children:e.jsx(x,{icon:R,size:16,className:"messenger-icon"})}),e.jsx("div",{className:"messenger-toolbar-separator"}),e.jsx("button",{className:"messenger-toolbar__btn","aria-label":"Text format",children:e.jsx("span",{className:"messenger-toolbar-text-btn",children:"A"})}),e.jsx("button",{className:"messenger-toolbar__btn","aria-label":"Insert emoji",children:e.jsx("span",{className:"messenger-toolbar-emoji-btn",children:"ðŸ˜Š"})})]}),e.jsxs("div",{className:"messenger-toolbar__input-area",children:[e.jsx("label",{htmlFor:"chat-input",className:"sr-only",children:t("messenger_input_label")||"Chat message"}),e.jsx("textarea",{id:"chat-input",ref:j,className:"messenger-textarea",value:d,onChange:r=>v(r.target.value),maxLength:500,onKeyDown:r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),u())}}),e.jsx("div",{className:"messenger-send-wrapper",children:e.jsx(w,{className:"messenger-send-btn",onClick:u,children:e.jsx("span",{className:"messenger-send-text",children:t("messenger_send")})})})]})]}),e.jsx("div",{className:"messenger-status-bar",role:"status",children:s?`${a.name} ${t("messenger_typing")}`:`${t("messenger_last_msg")} ${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`})]})},O=()=>{const[a,n]=l.useState("login"),[s,p]=l.useState(null),[c,o]=l.useState({}),[_,d]=l.useState(!1),[v,g]=l.useState(!1),{t:b}=N(),j=()=>n("contacts"),t=i=>{p(i),n("chat"),c[i.id]||o(m=>({...m,[i.id]:[]}))},u=async(i,m)=>{g(!0);const h=Math.floor(Math.random()*1500)+1500;setTimeout(()=>{const f=M[Math.floor(Math.random()*M.length)],k={id:Date.now().toString(),sender:"them",text:f,timestamp:new Date};o(y=>({...y,[m]:[...y[m]||[],k]})),g(!1)},h)},r=i=>{if(!i.trim()||!s)return;const m={id:Date.now().toString(),sender:"me",text:i,timestamp:new Date},h=[...c[s.id]||[],m];o(f=>({...f,[s.id]:h})),u(h,s.id)},V=()=>{if(d(!0),s){const i={id:Date.now().toString(),sender:"me",text:b("messenger_nudge"),timestamp:new Date},m=[...c[s.id]||[],i];o(h=>({...h,[s.id]:m})),setTimeout(()=>{g(!1),u(m,s.id)},500)}setTimeout(()=>d(!1),500)};return e.jsx("main",{className:"messenger",children:e.jsxs("div",{className:"messenger-content",children:[a==="login"&&e.jsx(H,{onLogin:j}),a==="contacts"&&e.jsx(D,{onOpenChat:t}),a==="chat"&&s&&e.jsx($,{activeContact:s,messages:c[s.id]||[],isTyping:v,isNudged:_,onBack:()=>n("contacts"),onSend:r,onNudge:V})]})})};export{O as Messenger};
