import{r as p,j as e}from"./vendor-CGXhCyq3.js";import{i as E}from"./file-alt-2Rtj3xTs.js";import{u as R,I as x}from"./game-CgryXVu0.js";import{u as y,a as D}from"./index-Bk-hPRSc.js";import{W as k}from"./WinButton-AkImxujQ.js";import"./i18n-CjG_VPcn.js";const W="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M11%2020h2V8h2V6h-2V4h-2v2H9v2h2v12zM7%2010V8h2v2H7zm0%200v2H5v-2h2zm10%200V8h-2v2h2zm0%200v2h2v-2h-2z'%20fill='currentColor'/%3e%3c/svg%3e",C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAoCAYAAAC8cqlMAAAAAXNSR0IArs4c6QAAAPRJREFUWIXtmCEOAkEMRWcIDhQKTkKQqwgWiwDHAbjAHAAOsA4EFkvArNxwAjyKA+DB0y8adsI2P32y2ZnMS9NOZ2NoiUFv9P6Ozabr+Ot+ncYnMoKLWINGJC7mSQSPJxlDxdmE56sWsWF/olqLmgJNRlzEGjQiXRREhV2llWrDIu1FDBX2tXqovkMN4HwpxfloMuIi1qARiblv7NxoGwBNRlzEGjQi8Ga/HTb/P0kIYbzcidh9W6rW0mTERaxBIwLf7GhM1o7xuUHPAgRNRlzEGjQisNgR1hsATUZcxBo0InCMR6A/4EWSDaAtaDLiItagEfkA5h0005tipb0AAAAASUVORK5CYII=",P=({folderId:h="desktop",windowId:n})=>{const{openWindow:u,getAppById:I,updateWindowTitle:m}=y(),{getItemsInFolder:g,getItem:A,deleteItem:N}=D(),{t:i}=R(),[a,f]=p.useState(h),[c,r]=p.useState(null),s=A(a),d=g(a);p.useEffect(()=>{!n||!s||m(n,s.name)},[a,n,s,m]);const v=t=>{const l=A(t);if(l){if(l.type==="folder")f(l.id),r(null);else if(l.type==="file"&&l.appId){const o=I(l.appId);o&&u(o,{content:l.content,title:l.name})}}},j=()=>{s?.parentId&&(f(s.parentId),r(null))},b=()=>{c&&(N(c),r(null))};return e.jsxs("section",{className:"file-explorer",tabIndex:-1,onKeyDown:t=>{t.key==="Delete"&&b()},onClick:()=>r(null),"aria-label":i("file_explorer")||"File Explorer",children:[e.jsxs("header",{className:"file-explorer-toolbar",children:[e.jsxs("span",{className:"file-explorer-address",children:[i("address_label")," ",s?.name||i("computer_root")]}),e.jsx(k,{onClick:j,disabled:!s?.parentId,className:"file-explorer-up-btn",title:i("ie_back"),style:{opacity:s?.parentId?1:.5},children:e.jsx(x,{icon:W,size:12})})]}),e.jsxs("div",{className:"file-explorer-grid",role:"list","aria-label":i("files_list")||"Files list",children:[d.length===0&&e.jsx("div",{className:"file-explorer-empty",children:i("folder_empty")}),d.map(t=>{const l=c===t.id;return e.jsxs("button",{type:"button",className:`file-item ${l?"file-item-selected":""}`,onClick:o=>{o.stopPropagation(),r(t.id)},onDoubleClick:o=>{o.stopPropagation(),v(t.id)},role:"listitem","aria-selected":l,children:[e.jsx("div",{className:"file-item-icon",children:t.type==="folder"?e.jsx("img",{src:C,alt:"",className:"file-explorer_action-icon "}):e.jsx(x,{icon:E,size:32,className:"file-item-icon__svg file-item-icon__svg--file"})}),e.jsx("span",{className:"file-item-name",children:t.name})]},t.id)})]}),e.jsxs("footer",{className:"file-explorer-status",children:[d.length," ",i("objects_count")]})]})};export{P as FileExplorer};
