import{j as e,r as l}from"./vendor-CGXhCyq3.js";import{u as N,I as j}from"./game-BD-K9wUi.js";import{W as w}from"./WinButton--HS0O22h.js";import{m as V}from"./index-CXS4LzyZ.js";import"./i18n-CjG_VPcn.js";const C=[{id:"1",name:"Cat",status:"online",avatar:"var(--warm-500)"}],M=["Meow meow! ","Meow meow Meow! ","Meow meow Meow Meow! ","Purr... "],D=({onLogin:a})=>{const{t:n}=N();return e.jsxs("div",{className:"messenger-login",children:[e.jsxs("header",{className:"messenger-login__header",children:[e.jsx(j,{icon:V,size:32,className:"messenger-login__icon"}),e.jsx("h1",{className:"messenger-login__title",children:n("messenger_title")}),e.jsx("span",{className:"messenger-login__subtitle",children:n("messenger_version")})]}),e.jsxs("form",{className:"messenger-login__form",onSubmit:s=>{s.preventDefault(),a()},children:[e.jsxs("div",{children:[e.jsx("label",{className:"messenger-label",htmlFor:"email-input",children:n("login_email")}),e.jsx("input",{id:"email-input",type:"text",className:"messenger-input",defaultValue:"guest@gmail.com",maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"messenger-label",htmlFor:"password-input",children:n("login_password")}),e.jsx("input",{id:"password-input",type:"password",className:"messenger-input",defaultValue:"password",maxLength:100})]}),e.jsxs("div",{className:"messenger-checkbox-group",children:[e.jsx("input",{type:"checkbox",id:"remember",defaultChecked:!0,className:"messenger-checkbox"}),e.jsx("label",{htmlFor:"remember",className:"messenger-checkbox-label",children:n("login_remember")})]}),e.jsx("div",{className:"messenger-btn-container",children:e.jsx(w,{className:"messenger-btn-login",type:"submit",children:n("login_signin")})})]})]})},R="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M15%202H9v2H7v6h2V4h6V2zm0%208H9v2h6v-2zm0-6h2v6h-2V4zM4%2016h2v-2h12v2H6v4h12v-4h2v6H4v-6z'%20fill='currentColor'/%3e%3c/svg%3e",S="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M7%208H5v2h2v2h2v2h2v2h2v-2h2v-2h2v-2h2V8h-2v2h-2v2h-2v2h-2v-2H9v-2H7V8z'%20fill='currentColor'/%3e%3c/svg%3e",$=({onOpenChat:a})=>{const{t:n}=N();return e.jsxs("div",{className:"messenger-contacts",children:[e.jsxs("header",{className:"messenger-user-status",children:[e.jsx("div",{className:"messenger-avatar-box",children:e.jsx(j,{icon:R,size:32,className:"messenger-user-icon"})}),e.jsxs("div",{className:"messenger-user-info",children:[e.jsx("span",{className:"messenger-user-name",children:n("messenger_guest")}),e.jsxs("div",{className:"messenger-status-dropdown",children:[e.jsx("span",{className:"messenger-status-dot-icon",children:"â—"}),e.jsx("span",{children:n("messenger_online")}),e.jsx(j,{icon:S,size:16})]})]})]}),e.jsxs("section",{className:"messenger-contact-list","aria-label":n("contact_list")||"Contact list",children:[e.jsxs("div",{className:"messenger-group-header",children:[e.jsx(j,{icon:S,size:16,className:"messenger-group-chevron"}),e.jsxs("span",{className:"messenger-group-title",children:[n("messenger_friends")," (",C.length,")"]})]}),e.jsx("div",{className:"messenger-contact-list-container",role:"list",children:C.map(s=>e.jsxs("button",{type:"button",className:"messenger-contact-item",onClick:()=>a(s),role:"listitem","aria-label":`Chat with ${s.name}, ${s.status}`,children:[e.jsxs("div",{className:"messenger-contact-avatar",children:[e.jsx("div",{className:"messenger-avatar-small",style:{backgroundColor:s.avatar}}),e.jsx("div",{className:`messenger-status-dot messenger-status-dot--${s.status}`})]}),e.jsxs("div",{className:"messenger-contact-details",children:[e.jsx("span",{className:"messenger-contact-name",children:s.name}),e.jsx("span",{className:"messenger-contact-status",children:s.status==="online"?n("messenger_status_chilling"):s.status==="busy"?n("messenger_status_coding"):n("messenger_status_away")})]})]},s.id))})]}),e.jsx("aside",{className:"messenger-ad-banner","aria-label":"Advertisement",children:n("messenger_ad")})]})},z=({activeContact:a,messages:n,isTyping:s,isNudged:p,onBack:c,onSend:o,onNudge:f})=>{const[d,x]=l.useState(""),g=l.useRef(null),_=l.useRef(null),v=l.useRef(null),{t:r}=N();l.useEffect(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[n,s]),l.useEffect(()=>{setTimeout(()=>{v.current?.focus()},100)},[]);const u=()=>{d.trim()&&(o(d),x(""))};return e.jsxs("div",{className:`messenger-chat ${p?"messenger-chat--nudged":""}`,children:[e.jsxs("header",{className:"messenger-chat__header",children:[e.jsxs("div",{className:"messenger-chat__user-row",children:[e.jsx("div",{className:"messenger-avatar-wrapper",children:e.jsx("div",{className:"messenger-avatar-medium",style:{backgroundColor:a.avatar}})}),e.jsxs("div",{className:"messenger-chat-user-details",children:[e.jsx("div",{className:"messenger-chat-username",children:a.name}),e.jsxs("div",{className:"messenger-chat-email",children:["<",a.name.toLowerCase(),"@gmail.com>"]})]})]}),e.jsx(w,{className:"messenger-back-btn",onClick:c,children:r("messenger_contacts")})]}),e.jsxs("div",{className:"messenger-chat__log",ref:_,role:"log","aria-live":"polite","aria-relevant":"additions text","aria-label":r("chat_log_label"),children:[e.jsx("div",{className:"messenger-chat__disclaimer",children:r("messenger_security_msg")}),n.map(t=>e.jsxs("article",{className:"messenger-message-item",children:[e.jsxs("div",{className:`messenger-message-sender ${t.sender==="me"?"messenger-sender-me":"messenger-sender-them"}`,children:[t.sender==="me"?r("messenger_guest"):a.name," ",r("messenger_says")]}),e.jsx("div",{className:`messenger-message-text ${t.text.includes("Nudge")?"messenger-message-nudge":""}`,children:t.text})]},t.id)),s&&e.jsx("div",{className:"messenger-typing-indicator",role:"status",children:e.jsxs("div",{className:"messenger-typing-text",children:[a.name," ",r("messenger_typing")]})}),e.jsx("div",{ref:g})]}),e.jsxs("footer",{className:"messenger-toolbar",children:[e.jsxs("div",{className:"messenger-toolbar__actions",children:[e.jsx("button",{className:"messenger-toolbar__btn","aria-label":"Text format",children:e.jsx("span",{className:"messenger-toolbar-text-btn",children:"A"})}),e.jsx("button",{className:"messenger-toolbar__btn","aria-label":"Insert emoji",children:e.jsx("span",{className:"messenger-toolbar-emoji-btn",children:"ðŸ˜Š"})})]}),e.jsxs("div",{className:"messenger-toolbar__input-area",children:[e.jsx("label",{htmlFor:"chat-input",className:"sr-only",children:r("messenger_input_label")||"Chat message"}),e.jsx("textarea",{id:"chat-input",ref:v,className:"messenger-textarea",value:d,onChange:t=>x(t.target.value),maxLength:500,onKeyDown:t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),u())}}),e.jsx("div",{className:"messenger-send-wrapper",children:e.jsx(w,{className:"messenger-send-btn",onClick:u,children:e.jsx("span",{className:"messenger-send-text",children:r("messenger_send")})})})]})]}),e.jsx("div",{className:"messenger-status-bar",role:"status",children:s?`${a.name} ${r("messenger_typing")}`:`${r("messenger_last_msg")} ${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`})]})},O=()=>{const[a,n]=l.useState("login"),[s,p]=l.useState(null),[c,o]=l.useState({}),[f,d]=l.useState(!1),[x,g]=l.useState(!1),{t:_}=N(),v=()=>n("contacts"),r=i=>{p(i),n("chat"),c[i.id]||o(m=>({...m,[i.id]:[]}))},u=async(i,m)=>{g(!0);const h=Math.floor(Math.random()*1500)+1500;setTimeout(()=>{const b=M[Math.floor(Math.random()*M.length)],T={id:Date.now().toString(),sender:"them",text:b,timestamp:new Date};o(y=>({...y,[m]:[...y[m]||[],T]})),g(!1)},h)},t=i=>{if(!i.trim()||!s)return;const m={id:Date.now().toString(),sender:"me",text:i,timestamp:new Date},h=[...c[s.id]||[],m];o(b=>({...b,[s.id]:h})),u(h,s.id)},k=()=>{if(d(!0),s){const i={id:Date.now().toString(),sender:"me",text:_("messenger_nudge"),timestamp:new Date},m=[...c[s.id]||[],i];o(h=>({...h,[s.id]:m})),setTimeout(()=>{g(!1),u(m,s.id)},500)}setTimeout(()=>d(!1),500)};return e.jsx("main",{className:"messenger",children:e.jsxs("div",{className:"messenger-content",children:[a==="login"&&e.jsx(D,{onLogin:v}),a==="contacts"&&e.jsx($,{onOpenChat:r}),a==="chat"&&s&&e.jsx(z,{activeContact:s,messages:c[s.id]||[],isTyping:x,isNudged:f,onBack:()=>n("contacts"),onSend:t,onNudge:k})]})})};export{O as Messenger};
