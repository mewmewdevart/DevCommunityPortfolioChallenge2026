import{r as n,j as l}from"./vendor-CGXhCyq3.js";import{W as w}from"./WinButton--HS0O22h.js";import{u as E}from"./index-CNkVN8KM.js";import{u as N}from"./game-BD-K9wUi.js";import"./i18n-CjG_VPcn.js";const e=({l:j,onClick:p,red:a,className:i="",bold:k=!1})=>l.jsx(w,{className:`calc-btn ${k?"calc-btn-bold":""} ${a?"calc-btn-red":"calc-btn-blue"} ${i}`,onClick:p,onMouseDown:u=>u.stopPropagation(),children:j}),D=()=>{const{activeWindowId:j}=E(),{t:p}=N(),[a,i]=n.useState("0"),[k,u]=n.useState(null),[d,C]=n.useState(null),[b,x]=n.useState(!0),r=n.useCallback(s=>{i(c=>b||c==="0"?s:c+s),x(!1)},[b]),o=n.useCallback(s=>{u(a),C(s),x(!0)},[a]),m=n.useCallback(()=>{if(k&&d){const s=parseFloat(k),c=parseFloat(a);let t=0;if(d==="+"&&(t=s+c),d==="-"&&(t=s-c),d==="*"&&(t=s*c),d==="/"){if(c===0){i("Error"),u(null),C(null),x(!0);return}t=s/c}const h=String(Math.round(t*1e8)/1e8);i(h),u(null),C(null),x(!0)}},[k,d,a]),f=n.useCallback(()=>{i("0"),u(null),C(null),x(!0)},[]),y=n.useCallback(()=>{i(s=>b||s.length===1?"0":s.slice(0,-1))},[b]);return n.useEffect(()=>{if(j!=="calculator")return;const s=c=>{const t=c.key;c.preventDefault(),/[0-9]/.test(t)&&r(t),t==="."&&r("."),t==="+"&&o("+"),t==="-"&&o("-"),t==="*"&&o("*"),t==="/"&&o("/"),(t==="Enter"||t==="=")&&m(),t==="Escape"&&f(),t==="Backspace"&&y()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[j,r,o,m,f,y]),l.jsxs("div",{className:"calculator-container",children:[l.jsx("div",{className:"calculator-display",children:a}),l.jsxs("div",{className:"calculator-main",children:[l.jsxs("div",{className:"calculator-memory",children:[l.jsx("div",{className:"calculator-memory-spacer"}),l.jsx(e,{l:"MC",onClick:()=>{},red:!0}),l.jsx(e,{l:"MR",onClick:()=>{},red:!0}),l.jsx(e,{l:"MS",onClick:()=>{},red:!0}),l.jsx(e,{l:"M+",onClick:()=>{},red:!0})]}),l.jsxs("div",{className:"calculator-grid",children:[l.jsx(e,{l:p("calc_back"),onClick:y,red:!0,className:"calc-btn-span-2"}),l.jsx(e,{l:"CE",onClick:f,red:!0}),l.jsx(e,{l:"C",onClick:f,red:!0}),l.jsx(e,{l:"7",onClick:()=>r("7"),bold:!0}),l.jsx(e,{l:"8",onClick:()=>r("8"),bold:!0}),l.jsx(e,{l:"9",onClick:()=>r("9"),bold:!0}),l.jsx(e,{l:"/",onClick:()=>o("/"),red:!0,bold:!0}),l.jsx(e,{l:"4",onClick:()=>r("4"),bold:!0}),l.jsx(e,{l:"5",onClick:()=>r("5"),bold:!0}),l.jsx(e,{l:"6",onClick:()=>r("6"),bold:!0}),l.jsx(e,{l:"*",onClick:()=>o("*"),red:!0,bold:!0}),l.jsx(e,{l:"1",onClick:()=>r("1"),bold:!0}),l.jsx(e,{l:"2",onClick:()=>r("2"),bold:!0}),l.jsx(e,{l:"3",onClick:()=>r("3"),bold:!0}),l.jsx(e,{l:"-",onClick:()=>o("-"),red:!0,bold:!0}),l.jsx(e,{l:"0",onClick:()=>r("0"),bold:!0}),l.jsx(e,{l:"+/-",onClick:()=>{}}),l.jsx(e,{l:".",onClick:()=>r("."),bold:!0}),l.jsx(e,{l:"+",onClick:()=>o("+"),red:!0,bold:!0}),l.jsx(e,{l:"=",onClick:m,red:!0,bold:!0,className:"calc-btn-span-4"})]})]})]})};export{D as CalculatorApp};
